"use strict";const output=document.querySelector(".modal__value"),rangeSLider=document.querySelector(".adjust-bar.adjust-bar_theme_temp"),arrowLeftDevs=document.querySelector(".devices__paginator .paginator__arrow_left"),arrowRightDevs=document.querySelector(".devices__paginator .paginator__arrow_right"),panelCountDevs=document.querySelectorAll(".devices__panel").length,devices=document.querySelector(".devices"),pagiantorDevs=document.querySelector(".devices__paginator");let currentPageDevs=1;$(".card").each(function(){$(this).hasClass("card_size_s")?$(this).css({"border-radius":"22px"}):$(this).css({"border-radius":"54px"})});let curValue,curRotate,maxRotate=.42,minRotate=-.42;const MIN_VALUE=26,MAX_VALUE=35,INDICATOR_OFFSET=265,rotateToValue=function(a){return Math.floor(Math.abs(1.73*(360*a)+INDICATOR_OFFSET)/53+MIN_VALUE)};function setRotate(a){a>maxRotate?a=maxRotate:a<minRotate&&(a=minRotate),curRotate=a,curValue=rotateToValue(a),document.querySelector(".modal_knob .modal__value").innerHTML="+"+curValue,document.querySelector(".knob__value").innerHTML="+"+curValue,document.querySelector(".knob__indicator").style.strokeDasharray=1.73*(360*curRotate)+INDICATOR_OFFSET+" 629",document.querySelector(".knob__arrow").style.transform="rotate("+360*curRotate+"deg)"}function getPosition(a){const b=a.getBoundingClientRect();return[b.left+(b.right-b.left)/2,b.top+(b.bottom-b.top)/2]}function getMouseAngle(a,b){const c=getPosition(b);let d,e=[a.clientX,a.clientY];return a.targetTouches&&a.targetTouches[0]&&(e=[a.targetTouches[0].clientX,a.targetTouches[0].clientY]),d=Math.atan2(e[1]-c[1],e[0]-c[0]),d+=Math.PI/2,d}let knobDragged,prevAngleRad=null,prevRotate=null;function startDragging(a){a.preventDefault(),a.stopPropagation();const b=getMouseAngle(a,document.querySelector(".knob_center"));knobDragged=!0,prevAngleRad=b,prevRotate=curRotate}function stopDragging(){knobDragged=!1}function dragRotate(a){if(!knobDragged)return;const b=prevAngleRad;let c=getMouseAngle(a,document.querySelector(".knob_center")),d=c-b;prevAngleRad=c,0>d&&(d+=2*Math.PI),d>Math.PI&&(d-=2*Math.PI);const e=d/Math.PI/2,f=prevRotate+e;prevRotate=f,setRotate(f)}function setEvtListeners(){document.querySelector(".knob-container")}setEvtListeners(),document.querySelectorAll(".modal_close").forEach(a=>{a.onclick=function(){document.querySelectorAll(".modal").forEach(a=>{a.classList.toggle("modal_open",!1),document.querySelector("body").style.overflow="auto"})}});const TEMPS={manual:-10,cold:0,warm:23,hot:30};document.querySelectorAll(".modal__filter-item_temp").forEach(a=>{a.onclick=function(){document.querySelector(".adjust-bar_theme_temp").value=TEMPS[this.id],document.querySelector(".modal_temp .modal__value").innerHTML=0<TEMPS[this.id]?"+"+TEMPS[this.id]:TEMPS[this.id]}});const showModal=function(a){document.querySelector(a).classList.toggle("modal_open",!0),document.querySelector("body").style.overflow="hidden"};document.querySelectorAll(".panel_lamp").forEach(a=>{a.onclick=function(){showModal(".modal_light")}}),document.querySelectorAll(".panel_floor").forEach(a=>{a.onclick=function(){showModal(".modal_knob")}}),document.addEventListener("DOMContentLoaded",function(){$(".card").each(function(){$(this).hasClass("card_size_s")?$(this).css({"border-radius":"22px"}):$(this).css({"border-radius":"23px"})});var a=document.querySelector(".card.card_size_s:last-child");a.innerHTML="<div class=\"card-heading\"><div class=\"card-icon-wrap\"><img class=\"card-icon\" src=\"img/kettle.svg\"></div><h3 class=\"card-title\">\u0412\u043E\u0434\u0430 \u0432\u0441\u043A\u0438\u043F\u0435\u043B\u0430</h3> </div><div class=\"card-specs\"><p class=\"card-source\">\u0427\u0430\u0439\u043D\u0438\u043A</p><p class=\"card-time card-time_block\">16:20, \u0421\u0435\u0433\u043E\u0434\u043D\u044F</p></div>"});const arrowLeftScens=document.querySelector(".scenarios__paginator .paginator__arrow_left"),arrowRightScens=document.querySelector(".scenarios__paginator .paginator__arrow_right"),panelCountScens=document.querySelectorAll(".scenarios__panel").length,pageCountScens=document.querySelectorAll(".scenarios__page").length,scenarios=document.querySelector(".scenarios"),pagiantorScens=document.querySelector(".scenarios__paginator");let currentPage=1;const selectButton=document.querySelector(".filter__select-button"),selectButtonText=document.querySelector(".filter__select-button .button__text"),selectOptions=document.querySelectorAll(".filter__select-item"),popup=document.querySelector(".filter__select-popup");let widths="";window.addEventListener("scroll",function(){widths+=document.querySelectorAll("body")[0].offsetWidth}),selectOptions.forEach(a=>{a.addEventListener("click",function(a){document.querySelector("#"+a.target.dataset.group).checked=!0,selectOptions.forEach(a=>a.classList.toggle("filter__select-item_checked",!1)),a.target.classList.toggle("filter__select-item_checked",!0),popup.classList.toggle("filter__select-popup_open",!1),selectButtonText.innerText=a.target.innerText})});var storage,initCriticalCam=function(){var b,j,k,w,z,A=[],y=document.querySelector(".critical-cam"),g=0,B=100,C=100;y.style.backgroundPosition="0px 0px",y.style.backgroundSize="100%",y.style.filter="brightness(100%)";var D=function(a,b){return b<a?a-b:b-a},a=function(f){for(var e=0;e<A.length;e++)if(f.pointerId==A[e].pointerId){A[e]=f;break}if(1==A.length&&(y.style.backgroundPosition=k+f.clientX-j+"px "+(w+f.clientY-b)+"px"),2==A.length){var h=(n=A[0].clientX,o=A[0].clientY,p=A[1].clientX,q=A[1].clientY,u=D(n,p),v=D(o,q),x=Math.sqrt(Math.pow(u,2)+Math.pow(v,2)),x);g<h?C+=1:C-=1,y.style.backgroundSize=C+"%",g=h,zoomText.textContent=C;var m=Math.atan2(A[1].clientY-A[0].clientY,A[1].clientX-A[0].clientX)*(180/Math.PI);z<m?B+=2:B-=2,y.style.filter="brightness("+B+"%)",z=m,brightText.textContent=B}var n,o,p,q,u,v,x},c=function(b){y.removeEventListener("pointermove",a),d(b)},d=function(a){for(var b=0;b<A.length;b++)if(A[b].pointerId==a.pointerId){A.splice(b,1);break}};y.addEventListener("pointerdown",function(c){A.push(c),j=c.clientX,b=c.clientY,k=parseInt(y.style.backgroundPositionX,10),w=parseInt(y.style.backgroundPositionY,10),2==A.length&&(z=Math.atan2(A[1].clientY-A[0].clientY,A[1].clientX-A[0].clientX)*(180/Math.PI)),y.addEventListener("pointermove",a)}),document.addEventListener("pointerup",c),y.addEventListener("onpointerup",c)};$(document).ready(function(){var a=$("#carousel");a.owlCarousel()});function status(a){return 200<=a.status&&300>a.status?Promise.resolve(a):Promise.reject(new Error(a.statusText))}function json(a){return a.json()}function buildHTML(a){a.events.forEach(function(b){var e,j,k,w,z,A,B,D,E,F,G,H,I,J,K,M,N,O,P,Q,R,T,U;J=document.querySelector(".content"),j=(e=document.querySelector("template").cloneNode(!0).content).querySelector(".card"),D=e.querySelector(".card-specs"),z=e.querySelector(".card-heading"),k=e.querySelector(".card-title"),w=e.querySelector(".card-icon"),A=e.querySelector(".card-source"),B=e.querySelector(".card-time"),k.textContent=b.title,w.src="img/"+b.icon+".svg",A.textContent=b.source,B.textContent=b.time,"s"==b.size&&B.classList.add("card-time_block"),b.description&&null!=b.description&&((F=document.querySelector(".template-description").content.querySelector(".card-description")).textContent=b.description,"l"==b.size&&F.classList.add("card-description_big"),"critical"==b.type&&(F.classList.add("description_critical"),z.classList.add("heading-critical"),D.classList.add("specs-critical"),b.data&&b.data.image&&(U=document.querySelector(".template-cam").content,F.appendChild(U))),j.appendChild(F.cloneNode(!0))),b.data&&("graph"==(G=b.data).type&&((I=(H=document.querySelector(".template-graph").content.querySelector(".card-data")).querySelector("img")).srcset="\n            img/Richdata.png 590w,\n            img/Richdata@2x.png 1180w,\n            img/Richdata@3x.png 1770w",I.sizes="\n                (max-width: 590px) 590px,\n        (max-width: 1180px) 1180px,\n        1770px\n                ",I.src="img/Richdata@2x.png",j.appendChild(H.cloneNode(!0))),G.temperature&&(N=(M=document.querySelector(".template-climat").content.querySelector(".card-data")).querySelector(".climat-block_data__temp"),O=M.querySelector(".climat-block_data__hum"),N.textContent=G.temperature+" C",O.textContent=G.humidity+"%",j.appendChild(M.cloneNode(!0))),G.volume&&(R=(P=document.querySelector(".template-music").content.querySelector(".card-data_music")).querySelector(".cover"),T=P.querySelector(".song-title"),Q=P.querySelector(".song-length"),P.querySelector(".song-volume").textContent=G.volume+"%",Q.textContent=G.track.length,T.textContent=G.artist+" - "+G.track.name,R.src=G.albumcover,j.appendChild(P.cloneNode(!0))),G.buttons&&(E=document.querySelector(".template-buttons").content,j.appendChild(E.cloneNode(!0)))),j.classList.add("card_size_"+b.size),"critical"==b.type&&j.classList.add("critical"),K=document.importNode(e,!0),J.appendChild(K)})}document.addEventListener("DOMContentLoaded",function(){const a=document.querySelector(".buttons-wrap"),b=document.querySelector(".card_size_m:nth-child(8) .card-description");setTimeout(function(){const c=document.querySelector(".buttons-wrap .button_yellow"),d=document.createElement("div"),e=document.createElement("p"),f=document.createElement("ol"),g=document.createElement("li"),h=document.createElement("li");d.setAttribute("class","purchase-list-wrap"),e.setAttribute("class","card-description card-description_big description_critical"),e.textContent="\u0421\u043F\u0438\u0441\u043E\u043A \u043F\u043E\u043A\u0443\u043F\u043E\u043A:",f.setAttribute("class","purchase-list"),g.setAttribute("class","purchase-list__item"),g.textContent="\u0425\u043B\u0435\u0431",h.setAttribute("class","purchase-list__item"),h.textContent="\u041C\u043E\u043B\u043E\u043A\u043E",d.appendChild(e),d.appendChild(f),f.appendChild(g),f.appendChild(h),c.onclick=()=>{b.replaceWith(d),a.style.display="none"}},500),document.getElementsByClassName("header-menu__switcher")[0].addEventListener("click",function(){document.getElementsByClassName("header-menu")[0].classList.toggle("header-menu_active")})},!1);var initVideoObs=function(){function b(a,b){if(Hls.isSupported()){var c=new Hls;c.loadSource(b),c.attachMedia(a),c.on(Hls.Events.MANIFEST_PARSED,function(){a.play()})}else a.canPlayType("application/vnd.apple.mpegurl")&&(a.src=b,a.addEventListener("loadedmetadata",function(){a.play()}))}var f=100,j=100;b(document.getElementById("video-1"),"http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fsosed%2Fmaster.m3u8"),b(document.getElementById("video-2"),"http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fcat%2Fmaster.m3u8"),b(document.getElementById("video-3"),"http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fdog%2Fmaster.m3u8"),b(document.getElementById("video-4"),"http://localhost:9191/master?url=http%3A%2F%2Flocalhost%3A3102%2Fstreams%2Fhall%2Fmaster.m3u8");for(var k=function(a,b,c){null==b&&(b=a.getBoundingClientRect().left),null==c&&(c=a.getBoundingClientRect().top),a.style.top=-c+"px",a.style.left=-b+"px"},e=function(a){var b=a.target,c=document.querySelector(".video-controls"),d=b.parentNode.querySelector(".analyser");b.classList.contains("video_active")?(c.classList.remove("video-controls_active"),d.classList.remove("analyser_active"),b.style.width="100%",b.style.height="300px",k(b,0,0),setTimeout(function(){b.classList.remove("video_active"),document.querySelector("html").style.overflow="scroll"},500)):(""==b.style.filter?i(100,100):i(/brightness\(([^)]+)%\)/.exec(b.style.filter)[1],/contrast\(([^)]+)%\)/.exec(b.style.filter)[1]),document.querySelector("html").style.overflow="hidden",c.classList.add("video-controls_active"),b.classList.add("video_active"),d.classList.add("analyser_active"),b.style.width=window.innerWidth+"px",b.style.height=window.innerHeight+"px",k(b))},o=function(){document.querySelector(".video_active").style.filter="brightness("+f+"%) contrast("+j+"%)"},i=function(a,b){document.querySelector(".video-control_brightness").value=a,document.querySelector(".video-control_contrast").value=b},c=function(a){f=a.target.value,o()},a=function(a){j=a.target.value,o()},l=function(b){var d=b.target;d.classList.contains("video-control_brightness")&&document.addEventListener("pointermove",c),d.classList.contains("video-control_contrast")&&document.addEventListener("pointermove",a)},q=function(a){var b=document.getElementById(a.target.dataset.video);b.muted=!b.muted,a.target.classList.toggle("video-volume_unmuted")},d=function(a){var b=new(window.AudioContext||window.webkitAudioContext),c=b.createMediaElementSource(a),d=b.createAnalyser();d.smoothingTimeConstant=.1,d.fftSize=32;var f=new Uint8Array(d.frequencyBinCount);setInterval(function(){d.getByteFrequencyData(f);for(var b=0,c=0;c<f.length;c++)f[c]>b&&(b=f[c]);a.parentNode.querySelector(".analyser").style.height=b+"px"},100),c.connect(d),d.connect(b.destination)},r=document.getElementsByClassName("video"),m=0;m<r.length;m++)r[m].addEventListener("pointerdown",e),d(r[m]);for(var s=document.getElementsByClassName("video-control"),u=0;u<s.length;u++)s[u].addEventListener("pointerdown",l);for(var v=document.getElementsByClassName("video-volume"),w=0;w<v.length;w++)v[w].addEventListener("pointerdown",q);document.addEventListener("pointerup",function(){document.removeEventListener("pointermove",c),document.removeEventListener("pointermove",a)})};